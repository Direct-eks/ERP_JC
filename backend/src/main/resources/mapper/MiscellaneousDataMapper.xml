<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jc.backend.dao.MiscellaneousDataMapper">

    <resultMap id="miscellaneousDataResultMap" type="org.jc.backend.entity.MiscellaneousDataO">
        <result property="propertyName" column="property_name"/>
        <result property="propertyValue" column="property_value"/>
        <result property="propertyRemark" column="property_remark"/>
    </resultMap>


    <select id="queryAllTaxRateOptions" resultMap="miscellaneousDataResultMap">
        select property_name, property_value, property_remark
        from miscellaneous_data
        where property_name = 'tax_rate'
    </select>
    
    <select id="queryLastWarehouseStockUpdateTime" resultMap="miscellaneousDataResultMap">
        select property_name, property_value, property_remark
        from miscellaneous_data
        where property_name = 'last_warehouse_stock_update_time'
    </select>
    
    <update id="updateLastBackupTime">
        update miscellaneous_data
        set property_value = datetime('now', 'localtime')
        where property_name = 'last_backup_time'
    </update>

</mapper>