<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="org.jc.backend.dao.SkuMapper">

    <resultMap id="SkuResultMap" type="org.jc.backend.entity.SkuFullO">
        <result property="skuID" column="sku_id"/>
        <result property="factoryBrandID" column="factory_brand_id"/>
        <result property="factoryCode" column="factory_code"/>
        <result property="modelID" column="model_id"/>
        <result property="newCode" column="new_code"/>
        <result property="oldCode" column="old_code"/>
        <result property="unitID" column="unit_id"/>
        <result property="unitName" column="unit_name"/>
        <result property="stockQuantity" column="stock_quantity"/>
        <result property="remark" column="remark"/>
        <result property="supplierID" column="supplier_id"/>
    </resultMap>


    <select id="queryFullSkuByModel" resultMap="SkuResultMap">
        select s.sku_id, s.factory_brand_id, f.code as factory_code, s.model_id, m.new_code, m.old_code,
               m.unit_id, u.name as unit_name, s.stock_quantity, s.remark, s.supplier_id
        from (w_sku as s join w_factory_brand as f on s.factory_brand_id = f.factory_brand_id)
            join (w_model as m join w_measurement_unit as u on m.unit_id = u.measurement_unit_id)
            on s.model_id = m.model_id
        where s.model_id = #{id}
    </select>

</mapper>